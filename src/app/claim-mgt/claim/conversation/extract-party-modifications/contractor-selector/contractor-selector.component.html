<div fxLayout="column" fxLayoutGap="24px">
    <div class="mat-title">Contractor</div>
    <mat-radio-group (change)="targetChanges($event)" fxLayout fxLayoutGap="20px">
        <mat-radio-button
            *ngFor="let item of actionTypes"
            [checked]="selectedTarget === item"
            [value]="item"
            >{{ item | ccSelectorType }}
        </mat-radio-button>
    </mat-radio-group>
    <ng-container *ngIf="selectedTarget === actionType.attachNew">
        <form [formGroup]="contractorForm">
            <mat-form-field fxFlex="">
                <input type="text" matInput formControlName="id" placeholder="Contractor ID" />
            </mat-form-field>
        </form>
    </ng-container>
    <ng-container *ngIf="selectedTarget === actionType.attach">
        <div *ngIf="isLoading" fxFlex fxLayout="row" fxLayoutAlign="center center">
            <mat-spinner></mat-spinner>
        </div>
        <div *ngIf="!isLoading && dataSource.data">
            <div class="table-container" fxLayout="column">
                <div fxLayout fxLayoutAlign="space-between">
                    <mat-form-field fxFlex="35">
                        <input
                            matInput
                            type="text"
                            (keyup)="applyFilter($event.target.value)"
                            placeholder="Filter"
                        />
                    </mat-form-field>
                </div>
                <table mat-table [dataSource]="dataSource" fxFlex>
                    <ng-container matColumnDef="select">
                        <th mat-header-cell *matHeaderCellDef class="mat-column-id"></th>
                        <td mat-cell *matCellDef="let item" class="mat-column-id">
                            <mat-checkbox
                                [checked]="item.checked"
                                (change)="change(item, $event)"
                            ></mat-checkbox>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="data">
                        <th mat-header-cell *matHeaderCellDef>Data</th>
                        <td mat-cell *matCellDef="let item" class="mat-column-data">
                            <cc-pretty-json inline="true" [object]="item.data"></cc-pretty-json>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                </table>
            </div>
        </div>
    </ng-container>
</div>
