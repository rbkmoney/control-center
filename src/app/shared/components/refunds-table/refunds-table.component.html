<div *ngIf="(refunds$ | async)?.length; else empty" fxLayout="column" fxLayoutGap="24px">
    <table mat-table [dataSource]="refunds$ | async">
        <ng-container matColumnDef="createdAt">
            <th mat-header-cell *matHeaderCellDef class="cc-caption">Created At</th>
            <td mat-cell *matCellDef="let refund">
                {{ refund.created_at | date: 'dd.MM.yyyy HH:mm:ss' }}
            </td>
        </ng-container>

        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef class="cc-caption">Status</th>
            <td mat-cell *matCellDef="let refund">
                <cc-status>{{ refund.status | ccMapUnion: mapStatus }}</cc-status>
            </td>
        </ng-container>

        <ng-container matColumnDef="amount">
            <th mat-header-cell *matHeaderCellDef class="cc-caption">Amount</th>
            <td mat-cell *matCellDef="let refund">
                {{ refund.amount | ccFormatAmount }}
                {{ refund.currency_symbolic_code | ccCurrency }}
            </td>
        </ng-container>

        <ng-container matColumnDef="reason">
            <th mat-header-cell *matHeaderCellDef class="cc-caption">Reason</th>
            <td mat-cell *matCellDef="let refund">
                {{ refund.reason }}
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    <button
        fxFlex="100"
        mat-button
        *ngIf="hasMore$ | async"
        (click)="fetchMore()"
        [disabled]="doAction$ | async"
    >
        {{ (doAction$ | async) ? 'LOADING...' : 'SHOW MORE' }}
    </button>
</div>
<ng-template #empty>
    <div *ngIf="isLoading$ | async; else emptyResult" fxLayout fxLayoutAlign="center center">
        <mat-spinner diameter="64"></mat-spinner>
    </div>
    <ng-template #emptyResult>
        <cc-empty-search-result unwrapped></cc-empty-search-result>
    </ng-template>
</ng-template>
